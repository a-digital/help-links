{# @var craft \craft\web\twig\variables\CraftVariable #}
{#
/**
 * Help Links plugin for Craft CMS 3.x
 *
 * Help Links settings/index.twig
 *
 * @author    A Digital
 * @copyright Copyright (c) 2018 A Digital
 * @link      https://adigital.agency
 * @package   HelpLinks
 * @since     1.0.0
 */
#}

{% extends "_layouts/cp" %}

{# Link for the ? icon at the bottom of the page #}
{% set docsUrl = "https://github.com/a-digital/help-links/blob/craft3/README.md" %}

{# The title of this CP section #}
{% set title = "Import / Export" %}

{# The URL to this plugin's base CP section #}
{% set pluginCpUrl = url('help-links') %}

{# The content of the CP Section #}
{% set content %}
	{% import "_includes/forms" as forms %}
	
	<h2>Export</h2>
	<p class="textline">You can export all of your current settings and sections / links using the button below. This will generate a json file for you to save locally. This file can then be used on other sites if needed.</p>
	<a href="export" class="btn submit">Export</a>
	<h2>Import</h2>
	<p class="textline">Importing your settings and sections / links is as easy as uploading your json file using the form below. If you don't have a json file then you can either create one or use the Export feature above on a site where you've created all of your links manually.</p>
	<p class="textline">Please be warned though, if you modify or try to create your own file then this could cause errors. In this instance the best thing to do is to uninstall the plugin and reinstall it to wipe the settings. You can then either fix your JSON formatting, or enter the settings manually.</p>
	
	
	<form id="main-form" method="post" enctype="multipart/form-data" accept-charset="UTF-8" data-saveshortcut{% if saveShortcutRedirect is defined %} data-saveshortcut-redirect="{{ saveShortcutRedirect|hash }}"{% endif %} data-confirm-unload novalidate>
        {{- csrfInput() }}
		<input type="hidden" name="action" value="help-links/cp/process-import">
	    <input type="hidden" name="pluginHandle" value="help-links">
	    {{ redirectInput("help-links/plugin") }}
		
		{{ forms.fileField({
		    label: 'Preferences',
		    instructions: 'JSON formatted settings file, this can be generated by another instance of the Help Links plugin',
		    id: 'jsonSettings',
		    name: 'jsonSettings',
		}) }}
		
		<p><input type="submit" class="btn submit" id="helplinksimport" value="{{ 'Import'|t('app') }}"></p>
	</form>
{% endset %}
